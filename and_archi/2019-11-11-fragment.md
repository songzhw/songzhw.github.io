## I. Introduction
Fragment has been made since 2011 for the support of tablet on Android 3.0+. The original intention is that it can help us to write once, but two different UI for phones and tablets. 

[Fragment's usage on different devices](https://i.stack.imgur.com/FtzKs.png)

But this seems only works for the list. More complex UI is hard to fulfill this goal. However, smart developers found out that Fragment actually could do a single part of UI View, so we could compose different Fragment to one screen, and, oh yearh, we could reuse our View code. Wasn't it wonderful?!

I was one of these excited developers. But after several years of using Fragment, I have to say, Fragment is one of the worst product in the Android world. Wait a minute, I am not here to declare a war, please allow me to explain more details.

## II. Issues A: Transaction
 
### 2.1 commit() and state loss

One of the most common crash I can see is `java.lang.IllegalStateException: Can not perform this action after onSaveInstanceState`. 

This exception is Android trying to tell you that if you update the Fragment after the app is being backgrounded or killed, then your update might be recorded in teh onSaveInstanceState(). So next time you bring back the app, this kind of update would be lost. 

I get it, and it's good. But sometimes we do not know when is the time to call `fragment.commit()`. So we have to use `fragment.commitAllowingStateLoss()`.  `commitAllowingStateLoss()` is not a good idea in generally, you can only use it when you are really sure this kind of update is okay to be lost. 